{% extends '_base.html' %}
{% load static %}

{% block title %}Home page{% endblock title %}

{% block content %}
<h1 class="text-center">Home page</h1>

<div class="container mt-4">
    <div class="row">
        <div class="col-md-6">
            <h3>Upload a CSV file</h3>
            <form method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                {{ form.as_p }}
                <button class="btn btn-primary" type="submit">Upload</button>
            </form>
        </div>

        <div class="col-md-6">
            <h3>Your Uploaded Files</h3>
            <ul class="list-group">
                {% for csv in user_csvs %}
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        {{ csv.file.name|cut:"csv_files/" }}
                        <span class="badge badge-secondary">{{ csv.uploaded_at|date:"Y-m-d H:i" }}</span>
                    </li>
                {% empty %}
                    <li class="list-group-item">You haven't uploaded any CSV files yet.</li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>
{% endblock content %}
